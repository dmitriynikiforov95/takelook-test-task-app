{"version":3,"sources":["components/takelook-service-context/takelook-service-context.js","components/hoc/with-takelook-service.js","components/spinner/index.js","components/spinner/spinner.js","components/card-list-item/card-list-item.js","components/card-list-item/index.js","components/card-list/card-list.js","actions/index.js","components/card-list/index.js","components/filter/filter.js","components/filter/index.js","components/tag-list/tag-list.js","components/tag-list/index.js","components/smart-search-panel/smart-search-panel.js","components/smart-search-panel/index.js","components/app/index.js","components/app/app.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/takelook-service.js","reducers/index.js","store.js","index.js"],"names":["React","createContext","TakeLookServiceProvider","Provider","TakeLookServiceConsumer","Consumer","withTakeLookService","Wrapped","props","takelookService","Spinner","className","Meta","AntdCard","CardListItem","card","name","view","price","params","tag","length","cover","alt","src","title","map","i","class","CardList","this","cardsLoaded","getData","then","data","cards","idx","id","Component","filterCards","selectedPriceRange","term","tags","newCards","filter","item","toLowerCase","indexOf","searchByTerm","min","max","findIndex","mapDispatchToProps","newBooks","type","payload","connect","loading","Filter","prevProps","setDefaultRangeValue","setCurrentRangeValue","minPrice","maxPrice","changeRangeFilter","defaultPriceRange","range","included","defaultValue","value","onChange","dispatch","tagRemovedFromTaglist","tagId","TagList","tagList","closable","key","onClose","e","preventDefault","SmartSeacrhPanel","Input","Search","onSumbit","tagAddedToTaglist","refValue","current","changeTerm","createRef","findSearchTags","variableTags","placement","content","ref","placeholder","dataSource","filterOption","inputValue","option","children","toUpperCase","suffix","onClick","SmartSearchPanel","App","ErrorIndicator","ErrorBoundry","state","hasError","setState","TakeLookService","Promise","resolve","setTimeout","initialState","addTagToList","currentValue","removeTageFromList","slice","findVariableTags","newArr","push","reducer","action","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ebd76f43.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst {\r\n    Provider: TakeLookServiceProvider,\r\n    Consumer: TakeLookServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    TakeLookServiceProvider,\r\n    TakeLookServiceConsumer\r\n}\r\n\r\n","import React from \"react\";\r\nimport { TakeLookServiceConsumer } from \"../takelook-service-context\";\r\n\r\nconst withTakeLookService = Wrapped => {\r\n  return props => {\r\n    return (\r\n      <TakeLookServiceConsumer>\r\n        {takelookService => {\r\n          return <Wrapped {...props} takelookService={takelookService} />;\r\n        }}\r\n      </TakeLookServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withTakeLookService;","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from \"react\";\r\nimport \"./spinner.css\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"lds-css wrapper\">\r\n        <div className=\"lds-magnify\">\r\n            <div><div>\r\n                <div></div>\r\n                <div></div>\r\n            </div></div>\r\n        </div>\r\n    </div>\r\n);\r\n};\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\n\r\nimport { Card as AntdCard } from \"antd\";\r\n\r\nimport \"./card-list-item.css\";\r\n\r\nconst { Meta } = AntdCard;\r\n\r\nconst CardListItem = ({ card }) => {\r\n  const { name, view, price, params } = card;\r\n\r\n  const comma = \",\";\r\n  let tag = \"теги:\";\r\n\r\n  if (params.length == 0) {\r\n    tag = \"теги отсутствуют\"\r\n  }\r\n  \r\n  return (\r\n    <AntdCard className=\"card-list-item\" cover={<img alt={name} src={view} />}>\r\n      <Meta title={name} />\r\n      <div className=\"card-list-item__price\">{`${price} р.`}</div>\r\n      <ul className=\"card-list-item__tag-list\">\r\n        <span className=\"span\">{tag}</span>\r\n        {params.map(i => (\r\n          <li className=\"card-list-item__tag-list-item\">\r\n            {\"#\"}\r\n            {i}\r\n            <span class=\"card-list-item__tag-list-item-comma\">{comma}</span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </AntdCard>\r\n  );\r\n};\r\n\r\nexport default CardListItem;\r\n","import CardListItem from './card-list-item';\r\n\r\nexport default CardListItem;","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { withTakeLookService } from \"../hoc/\";\r\nimport { cardsLoaded } from \"../../actions\";\r\nimport Spinner from \"../spinner/\";\r\n\r\nimport CardListItem from \"../card-list-item\";\r\nimport \"./card-list.css\";\r\n\r\nclass CardList extends Component {\r\n  componentDidMount() {\r\n    const { takelookService, cardsLoaded } = this.props;\r\n    takelookService.getData().then(data => cardsLoaded(data));\r\n  }\r\n\r\n  render() {\r\n    const { cards } = this.props;\r\n    // if (loading) {\r\n    //   return <Spinner />;\r\n    // }\r\n    return (\r\n      <ul className=\"card-list\">\r\n        {cards.map((card, idx) => {\r\n          return (\r\n            <li id={idx} className=\"card-list__item\">\r\n              <CardListItem card={card} />\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst filterCards = (cards, selectedPriceRange, term, tags) => {\r\n  const searchByTerm = (cards, term) => {\r\n    return term.length === 0\r\n      ? cards\r\n      : cards.filter(\r\n          item => item.name.toLowerCase().indexOf(term.toLowerCase()) > -1\r\n        );\r\n  };\r\n\r\n  let newCards = searchByTerm(cards, term).filter(\r\n    item =>\r\n      item.price >= selectedPriceRange.min &&\r\n      item.price <= selectedPriceRange.max\r\n  );\r\n\r\n  return tags.length == 0\r\n    ? newCards\r\n    : newCards.filter(card => {\r\n        for (let params of card.params) {\r\n          if (!(tags.findIndex(i => i === params) === -1)) {\r\n            return true;\r\n          }\r\n        }\r\n      });\r\n};\r\n\r\nconst mapStateToProps = ({\r\n  cards,\r\n  loading,\r\n  selectedPriceRange,\r\n  term,\r\n  tags\r\n}) => {\r\n  return {\r\n    cards: filterCards(cards, selectedPriceRange, term, tags),\r\n    loading\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  cardsLoaded\r\n};\r\n\r\nexport default withTakeLookService(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(CardList)\r\n);\r\n","\r\nconst cardsLoaded = newBooks => {\r\n  return {\r\n    type: \"FETCH_CARDS_SUCCESS\",\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst changeRangeFilter = value => {\r\n  return {\r\n    type: \"CHANGE_RANGE_FILTER\",\r\n    payload: {\r\n      min: value[0],\r\n      max: value[1]\r\n    }\r\n  };\r\n};\r\n\r\n\r\nconst tagAddedToTaglist = tagId => {\r\n  return {\r\n    type: \"TAG_ADDED_TO_TAGLIST\",\r\n    payload: tagId\r\n  };\r\n};\r\n\r\nconst tagRemovedFromTaglist = tagId => {\r\n  return {\r\n    type: \"TAG_REMOVED_FROM_TAGLIST\",\r\n    payload: tagId\r\n  };\r\n};\r\n\r\nconst findSearchTags = value => {\r\n  return {\r\n    type: \"FIND_SEARCH_TAGS\",\r\n    payload: value\r\n  };\r\n};\r\n\r\n\r\n\r\nconst changeTerm = term => {\r\n  return {\r\n    type: \"CHANGE_TERM\",\r\n    payload: term\r\n  };\r\n};\r\n\r\n\r\nconst setCurrentRangeValue = (min, max) => {\r\n  return {\r\n    type: \"SET_CURRENT_RANGE_VALUE\",\r\n    payload: {\r\n      min,\r\n      max\r\n    }\r\n  };\r\n};\r\n\r\nconst setDefaultRangeValue = (min, max) => {\r\n  return {\r\n    type: \"SET_DEFAULT_RANGE_VALUE\",\r\n    payload: {\r\n      min,\r\n      max\r\n    }\r\n  };\r\n};\r\n\r\n\r\nexport {\r\n  cardsLoaded,\r\n  changeRangeFilter,\r\n  setCurrentRangeValue,\r\n  setDefaultRangeValue,\r\n  tagAddedToTaglist,\r\n  tagRemovedFromTaglist,\r\n  findSearchTags,\r\n  changeTerm\r\n};\r\n","import CardList from './card-list';\r\n\r\nexport default CardList;","import React, { Component } from \"react\";\r\nimport { Slider} from \"antd\";\r\nimport \"./filter.css\";\r\nimport {\r\n  changeRangeFilter,\r\n  setCurrentRangeValue,\r\n  setDefaultRangeValue\r\n} from \"../../actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Spinner from \"../spinner\";\r\n\r\n\r\nclass Filter extends Component {\r\n  componentDidUpdate(prevProps) {\r\n\r\n    const { cards, setDefaultRangeValue, setCurrentRangeValue } = this.props;\r\n\r\n    if (cards.length !== prevProps.cards.length) {\r\n      let minPrice = cards[0].price;\r\n      let maxPrice = cards[0].price;\r\n\r\n      for (let i = 0; i < cards.length; i++) {\r\n        if (minPrice < cards[i].price) {\r\n          continue;\r\n        } else {\r\n          minPrice = cards[i].price;\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < cards.length; i++) {\r\n        if (maxPrice < cards[i].price) {\r\n          maxPrice = cards[i].price;\r\n        }\r\n      }\r\n\r\n      setDefaultRangeValue(minPrice, maxPrice);\r\n      setCurrentRangeValue(minPrice, maxPrice);\r\n    }\r\n  }\r\n  render() {\r\n    const {\r\n      changeRangeFilter,\r\n      defaultPriceRange,\r\n      loading,\r\n      selectedPriceRange,\r\n\r\n    } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Slider\r\n          className=\"filter\"\r\n          range\r\n          included\r\n          defaultValue={[defaultPriceRange.min, defaultPriceRange.max]}\r\n          value={[selectedPriceRange.min, selectedPriceRange.max]}\r\n          max={defaultPriceRange.max}\r\n          min={defaultPriceRange.min}\r\n          onChange={changeRangeFilter}\r\n        />\r\n        <div>\r\n          <div>\r\n            <span>Стоимость</span>\r\n            <span>{selectedPriceRange.min}</span>-<span>{selectedPriceRange.max}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ loading, cards, defaultPriceRange, selectedPriceRange }) => {\r\n  return {\r\n    loading,\r\n    defaultPriceRange,\r\n    selectedPriceRange,\r\n    cards\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    changeRangeFilter: (min,max) => dispatch(changeRangeFilter(min, max)),\r\n    setCurrentRangeValue: (min, max) =>\r\n      dispatch(setCurrentRangeValue(min, max)),\r\n    setDefaultRangeValue: (min, max) => dispatch(setDefaultRangeValue(min, max))\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Filter);\r\n","import Filter from './filter';\r\n\r\nexport default Filter;","import React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { tagRemovedFromTaglist } from \"../../actions\";\r\n\r\nimport { Tag } from \"antd\";\r\n\r\n// Почему закрывается сразу 2 тэга и один не рендериться ?\r\n// Сделать нормальное отображение флекс элементов, когда используешь фильтр\r\n\r\nconst TagListContainer = ({ tags, tagRemovedFromTaglist }) => {\r\n  const tagList = tags.map((item, idx) => {\r\n    return (\r\n      <Tag\r\n        closable\r\n        key={idx} // убраать еслине будет работать\r\n        onClose={e => {\r\n          e.preventDefault();\r\n          tagRemovedFromTaglist(idx);\r\n        }}\r\n      >\r\n        {item}\r\n      </Tag>\r\n    );\r\n  });\r\n\r\n  return <div>{tagList}</div>;\r\n};\r\n\r\nconst mapStateToProps = ({ tags }) => {\r\n  return {\r\n    tags\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  tagRemovedFromTaglist\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(TagListContainer);\r\n","import TagList from './tag-list';\r\n\r\nexport default TagList;","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Icon, Input, AutoComplete, Popover} from \"antd\";\r\n\r\nimport { tagAddedToTaglist, changeTerm, findSearchTags } from \"../../actions\";\r\n\r\nimport \"./smart-search-panel.css\";\r\n\r\nimport TagListContainer from \"../tag-list\";\r\n\r\nconst { Search } = Input;\r\n\r\nclass SmartSeacrhPanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.refValue = React.createRef();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { cards, findSearchTags } = this.props;\r\n\r\n    if (cards.length !== prevProps.cards.length) {\r\n      findSearchTags(cards);\r\n    }\r\n  }\r\n\r\n  onSumbit = e => {\r\n    this.props.tagAddedToTaglist(this.refValue.current.props.value);\r\n    this.props.changeTerm(\"\");\r\n  };\r\n\r\n  onChange = e => {\r\n    this.props.changeTerm(e);\r\n  };\r\n  render() {\r\n    const { variableTags } = this.props;\r\n\r\n    return (\r\n      <div>\r\n      <Popover placement=\"topLeft\"  content={\"Для добавления тега нажимите на значок \\'поиск\\'\"}>\r\n        <AutoComplete\r\n          ref={this.refValue}\r\n          className=\"smart-search-panel\"\r\n          placeholder=\"Поиск по тегам и названиям\"\r\n          onChange={this.onChange}\r\n          value={this.props.term}\r\n          dataSource={variableTags}\r\n          filterOption={(inputValue, option) =>\r\n            option.props.children\r\n              .toUpperCase()\r\n              .indexOf(inputValue.toUpperCase()) !== -1\r\n          }\r\n        >\r\n       \r\n          <Input\r\n          content={\"hello\"}\r\n            suffix={\r\n              <Icon\r\n                onClick={value => this.onSumbit(value)}\r\n                type=\"search\"\r\n                className=\"certain-category-icon\"\r\n              />\r\n            }\r\n          />\r\n        </AutoComplete>\r\n        </Popover>\r\n        <div>\r\n          <TagListContainer />\r\n        </div>\r\n       </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ term, cards, variableTags }) => {\r\n  return {\r\n    term,\r\n    cards,\r\n    variableTags\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  tagAddedToTaglist,\r\n  changeTerm,\r\n  findSearchTags\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SmartSeacrhPanel);\r\n","import SmartSearchPanel from './smart-search-panel';\r\n\r\nexport default SmartSearchPanel;","import App from './app';\r\n\r\nexport default App;","import React from \"react\";\r\nimport CardList from \"../card-list\";\r\nimport \"antd/dist/antd.css\"\r\nimport \"./app.css\";\r\nimport Filter from \"../filter/\";\r\nimport SmartSearchPanel from \"../smart-search-panel\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"app__wrapper\">\r\n      <h1 className=\"app__title\">TAKELOOK</h1>\r\n      <div className=\"block__wrapper\">\r\n        <div className=\"card-list__wrapper\">\r\n          <CardList />\r\n        </div>\r\n        <div className=\"search_wrapper\">\r\n          <SmartSearchPanel />\r\n          <Filter />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from \"react\";\r\nimport \"./error-indicator.css\";\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <div className=\"error-indicator-wrapper\">\r\n      <div className=\"error-message-wrapper\">\r\n        <div className=\"error-message-title\">Ошибка</div>\r\n        <div>Билеты не загружены <br/> Перезагрузите страницу!</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;","import React, { Component } from \"react\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nexport default class ErrorBoundry extends Component {\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true\r\n    });\r\n  }\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","export default class TakeLookService {\r\n\r\n        data =  [{\r\n            \"id\": 12,\r\n            \"name\": \"Фламинго\",\r\n            \"price\": 1200,\r\n            \"view\": [\"https://128121.selcdn.ru/react/1.jpg\"],\r\n            \"params\": [\"птица\", \"окно\"]\r\n        },\r\n        {\r\n            \"id\": 13,\r\n            \"name\": \"Семейная\",\r\n            \"price\": 1800,\r\n            \"view\": [\"https://128121.selcdn.ru/react/2.jpg\"],\r\n            \"params\": [\"камин\", \"качель\", \"окно\"]\r\n        },\r\n        {\r\n            \"id\": 15,\r\n            \"name\": \"Ночная\",\r\n            \"price\": 2000,\r\n            \"view\": [\"https://128121.selcdn.ru/react/3.jpg\"],\r\n            \"params\": [\"зеркало\", \"стул\", \"портрет\"]\r\n        },\r\n        {\r\n            \"id\": 122,\r\n            \"name\": \"Калибри\",\r\n            \"price\": 1300,\r\n            \"view\": [\"https://128121.selcdn.ru/react/4.jpg\"],\r\n            \"params\": [\"картина\", \"слон\", \"стекло\"]\r\n        },\r\n        {\r\n            \"id\": 123,\r\n            \"name\": \"Стильная\",\r\n            \"price\": 1500,\r\n            \"view\": [\"https://128121.selcdn.ru/react/5.jpg\"],\r\n            \"params\": [\"занавес\", \"тумба\"]\r\n        },\r\n        {\r\n            \"id\": 100,\r\n            \"name\": \"Лофт\",\r\n            \"price\": 2200,\r\n            \"view\": [\"https://128121.selcdn.ru/react/6.jpg\"],\r\n            \"params\": []\r\n        },\r\n        {\r\n            \"id\": 178,\r\n            \"name\": \"Таганка\",\r\n            \"price\": 1100,\r\n            \"view\": [\"https://128121.selcdn.ru/react/7.jpg\"],\r\n            \"params\": [\"картина\", \"обои\", \"окно\"]\r\n        },\r\n        {\r\n            \"id\": 1221,\r\n            \"name\": \"Лондон\",\r\n            \"price\": 1250,\r\n            \"view\": [\"https://128121.selcdn.ru/react/8.jpg\"],\r\n            \"params\": [\"камин\", \"картина\", \"окно\"]\r\n        },\r\n        {\r\n            \"id\": 1891,\r\n            \"name\": \"Уют\",\r\n            \"price\": 1450,\r\n            \"view\": [\"https://128121.selcdn.ru/react/9.jpg\"],\r\n            \"params\": [\"камин\", \"обои\", \"картина\"]\r\n        }\r\n    ]\r\n        \r\n    getData() {\r\n        return new Promise(resolve => {\r\n          setTimeout(() => {\r\n            resolve(this.data);\r\n          }, 700);\r\n        });\r\n      }\r\n\r\n}\r\n\r\n\r\n","const initialState = {\r\n  cards: [],\r\n  tags: [\"камин\"],\r\n  term: \"\",\r\n  variableTags: [],\r\n  loading: true,\r\n  selectedPriceRange: [0, 500],\r\n  defaultPriceRange: {\r\n    min: 0,\r\n    max: 500\r\n  }\r\n};\r\n\r\n// 1) Сделать одну функцию\r\n\r\nconst addTagToList = (state, tag) => {\r\n  let test = state.cards.filter(card => {\r\n    for (let params of card.params) {\r\n      if (params == tag) return true;\r\n    }\r\n  });\r\n\r\n  if (!test.length == 0) {\r\n    const item = state.tags.findIndex(\r\n      currentValue => currentValue == tag.toLowerCase()\r\n    );\r\n\r\n    if (item == -1) {\r\n      return {\r\n        ...state,\r\n        tags: [...state.tags, tag]\r\n      };\r\n    } else {\r\n      return {\r\n        ...state\r\n      };\r\n    }\r\n  } else {\r\n    return {\r\n      ...state\r\n    };\r\n  }\r\n};\r\n\r\nconst removeTageFromList = (state, tag) => {\r\n  let tags = [...state.tags.slice(0, tag), ...state.tags.slice(tag + 1)];\r\n  return {\r\n    ...state,\r\n    tags: tags\r\n  };\r\n};\r\n\r\nconst findVariableTags = (state, cards) => {\r\n  let newArr = [];\r\n  cards.filter(card => {\r\n    for (let params of card.params) {\r\n      if (newArr.findIndex(currentValue => currentValue == params) == -1)\r\n        newArr.push(params);\r\n    }\r\n  });\r\n  return {\r\n    ...state,\r\n    variableTags: newArr\r\n  };\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_CARDS_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        cards: action.payload,\r\n        loading: false\r\n      };\r\n    case \"CHANGE_RANGE_FILTER\":\r\n      return {\r\n        ...state,\r\n        selectedPriceRange: {\r\n          min: action.payload.min,\r\n          max: action.payload.max\r\n        }\r\n      };\r\n    case \"SET_CURRENT_RANGE_VALUE\":\r\n      return {\r\n        ...state,\r\n        selectedPriceRange: action.payload\r\n      };\r\n\r\n    case \"SET_DEFAULT_RANGE_VALUE\":\r\n      return {\r\n        ...state,\r\n        defaultPriceRange: {\r\n          min: action.payload.min,\r\n          max: action.payload.max\r\n        }\r\n      };\r\n    case \"FIND_SEARCH_TAGS\": // добавить актуальный тэги в стор\r\n      return findVariableTags(state, action.payload);\r\n    case \"TAG_ADDED_TO_TAGLIST\":\r\n      return addTagToList(state, action.payload);\r\n    case \"TAG_REMOVED_FROM_TAGLIST\":\r\n      return removeTageFromList(state, action.payload);\r\n    case \"CHANGE_TERM\":\r\n      return {\r\n        ...state,\r\n        term: action.payload\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore } from \"redux\";\r\n\r\nimport reducer from \"./reducers\";\r\n\r\nconst store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\nimport { Provider } from \"react-redux\";\n\nimport ErrorBoundry from \"./components/error-boundry\";\nimport TakeLookService from \"./services/takelook-service\";\nimport { TakeLookServiceProvider } from \"./components/takelook-service-context\";\n\nimport store from \"./store\";\n\nconst takelookService = new TakeLookService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <TakeLookServiceProvider value={takelookService}>\n        <App />\n      </TakeLookServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n\n\n"],"sourceRoot":""}